--- kernel/sched/core.c	2012-05-21 00:29:13.000000000 +0200
+++ kernel/sched/core.c	2014-01-08 18:42:33.000000000 +0100
@@ -1690,7 +1692,8 @@
  */
 int wake_up_process(struct task_struct *p)
 {
-	return try_to_wake_up(p, TASK_ALL, 0);
+	WARN_ON(task_is_stopped_or_traced(p));
+	return try_to_wake_up(p, TASK_NORMAL, 0);
 }
 EXPORT_SYMBOL(wake_up_process);
 
